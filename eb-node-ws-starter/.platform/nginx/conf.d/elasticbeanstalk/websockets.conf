# This file is included inside the main server{} on EB
# Ensure WebSocket upgrade headers are passed through the reverse proxy
location /ws {
  proxy_pass          http://127.0.0.1:8080;
  proxy_http_version  1.1;
  proxy_set_header    Upgrade $http_upgrade;
  proxy_set_header    Connection $connection_upgrade;
  proxy_set_header    Host $host;
  proxy_read_timeout  3600s;
}

# (optional) also set for root location if you do ws on other paths
location / {
  proxy_set_header    Upgrade $http_upgrade;
  proxy_set_header    Connection $connection_upgrade;
  proxy_http_version  1.1;
}
